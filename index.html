<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M-Cyrillic Protocol IDE | Shima Hikari</title>
    <style>
        :root {
            --bg: #0d1117; --text: #c9d1d9; --accent: #58a6ff; --secondary: #8b949e;
            --code-bg: #161b22; --border: #30363d; --success: #238636; --danger: #f85149;
            --halo-glow: 0 0 10px rgba(88, 166, 255, 0.4);
        }
        body { font-family: 'Segoe UI', "Hiragino Kaku Gothic ProN", sans-serif; background-color: var(--bg); color: var(--text); line-height: 1.6; margin: 0; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 240px 1fr; gap: 30px; }
        .sidebar { position: sticky; top: 20px; height: calc(100vh - 40px); border-right: 1px solid var(--border); padding-right: 20px; overflow-y: auto; }
        
        .logo-area { text-align: center; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px; }
        .logo-text { font-family: monospace; font-weight: bold; color: var(--accent); text-shadow: var(--halo-glow); font-size: 1.1rem; }
        nav ul { list-style: none; padding: 0; }
        nav a { color: var(--secondary); text-decoration: none; display: block; padding: 8px; font-size: 0.9rem; transition: 0.2s; }
        nav a:hover { color: var(--accent); background: rgba(88,166,255,0.1); border-radius: 4px; }

        .section { margin-bottom: 40px; background: var(--code-bg); padding: 25px; border-radius: 8px; border: 1px solid var(--border); }
        h2 { color: var(--accent); border-bottom: 1px solid var(--border); padding-bottom: 10px; font-family: monospace; }
        
        table { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 0.85rem; }
        th, td { border: 1px solid var(--border); padding: 10px; text-align: left; }
        th { background-color: #21262d; }
        
        .tool-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        textarea, select, input { width: 100%; background: #000; border: 1px solid var(--border); color: #fff; padding: 10px; border-radius: 4px; box-sizing: border-box; }
        
        .trans-display { background: #000; border: 1px dashed var(--accent); color: var(--accent); padding: 20px; text-align: center; font-size: 1.8rem; font-family: monospace; margin-top: 10px; min-height: 40px; }
        button { background: var(--accent); color: #000; border: none; padding: 12px; cursor: pointer; font-weight: bold; width: 100%; border-radius: 4px; transition: 0.2s; }
        
        /* 削除ボタン専用スタイル */
        .btn-delete { background: transparent; color: var(--danger); border: 1px solid var(--danger); padding: 2px 8px; width: auto; font-size: 0.7rem; }
        .btn-delete:hover { background: var(--danger); color: white; }

        .badge { font-size: 0.7rem; padding: 2px 5px; border-radius: 3px; background: #30363d; vertical-align: middle; margin-right: 5px; }
    </style>
</head>
<body>

<div class="container">
    <aside class="sidebar">
        <div class="logo-area">
            <div class="logo-text">MILLENNIUM<br>M-CYRILLIC IDE</div>
            <div style="font-size: 0.7rem; color: var(--secondary); margin-top:10px;">PROTCOL v2.5<br>DEV: SHIMA HIKARI</div>
        </div>
        <nav>
            <p style="font-size: 0.7rem; color: var(--accent);">-- DOCUMENTATION</p>
            <ul>
                <li><a href="#overview">00. 概要 (Overview)</a></li>
                <li><a href="#phonology">01. 音韻論 (Phonology)</a></li>
                <li><a href="#syntax">02. 統語論 (Syntax)</a></li>
                <li><a href="#morphology">03. 形態論 (Morphology)</a></li>
            </ul>
            <p style="font-size: 0.7rem; color: var(--accent); margin-top:20px;">-- TERMINAL</p>
            <ul>
                <li><a href="#translator">自動翻訳エンジン</a></li>
                <li><a href="#dictionary">辞書マネージャー</a></li>
            </ul>
        </nav>
    </aside>
</div>

    <main class="main-content">
        <section id="overview" class="section">
            <h1>00. 概要定義</h1>
            <p><strong>言語名称：</strong> Metric-Cyrillic (M-Cyrillic / メトリック・キリル)</p>
            <p><strong>開発者：</strong> 島 ヒカリ (Millennium Science School)</p>
            <p><strong>設計思想：</strong></p>
            <blockquote>
                「自然言語は曖昧すぎます。感情や文脈による揺らぎを廃し、事象を数式のように記述するためのプロトコルが必要です。この言語における『会話』とは、情報の伝達ではなく、関数の実行を意味します。」
            </blockquote>
            <p>本言語は、スラブ語派のキリル文字を記号として採用し、物理学的な演算子構造（ポーランド記法）を文法に取り入れた人工言語である。</p>
        </section>

        <section id="phonology" class="section">
            <h1>01. 音韻論 (Phonology)</h1>
            <p>音素は物理定数のような硬質感と、シマエナガ（鳥類）の高周波音を融合させている。</p>
            
            <h3>母音体系 (Vowels)</h3>
            <table>
                <tr>
                    <th>文字</th>
                    <th>IPA</th>
                    <th>物理的意味</th>
                    <th>備考</th>
                </tr>
                <tr><td>А</td><td>/a/</td><td>開放・エネルギー</td><td>明るいア</td></tr>
                <tr><td>И</td><td>/i/</td><td>指向性・ベクトル</td><td>鋭いイ</td></tr>
                <tr><td>У</td><td>/u/</td><td>質量・重力</td><td>深いウ</td></tr>
                <tr><td>Э</td><td>/e/</td><td>定義・等号</td><td>エ</td></tr>
                <tr><td>О</td><td>/o/</td><td>空間・包含</td><td>オ</td></tr>
                <tr><td>Ы</td><td>/ɨ/</td><td>虚数・エラー・否定</td><td>喉の奥で発音する濁ったイ</td></tr>
            </table>

            <h3>特徴的な子音</h3>
            <ul>
                <li><strong>破擦音 (鳥属性):</strong> <code class="language-cyrillic">Ц (/ts/)</code>, <code class="language-cyrillic">Ч (/tʃ/)</code> - 高速演算時の排熱音のような響き。</li>
                <li><strong>閉鎖音 (機械属性):</strong> <code class="language-cyrillic">К, Г, Т, Д</code> - 明確な区切り（離散化）を表す。</li>
            </ul>
        </section>

        <section id="syntax" class="section">
            <h1>02. 統語論 (Syntax)</h1>
            <p>SVO（主語-動詞-目的語）ではなく、<strong>VSO（動詞-主語-目的語）</strong>を採用。これは関数プログラミングにおける <code>Function(Arg1, Arg2)</code> の構造を言語化したものである。</p>

            <div class="syntax-block">
                <div class="syntax-part">
                    <span class="syntax-label">V: Operator</span>
                    <strong>動詞 (作用)</strong>
                </div>
                <div class="syntax-part">
                    <span class="syntax-label">S: Input 1</span>
                    <strong>主語 (慣性系)</strong>
                </div>
                <div class="syntax-part">
                    <span class="syntax-label">O: Input 2</span>
                    <strong>目的語 (被作用系)</strong>
                </div>
            </div>

            <h3>例文解析</h3>
            <p>日本語：「私は理論を作る」</p>
            <pre>
M-Cyrillic: Гент クライナ テオン
Structure:  [Create] [Me] [Theory]
Logic:      Create(Me, Theory);
            </pre>
        </section>

        <section id="morphology" class="section">
            <h1>03. 形態論 (Morphology)</h1>
            
            <h3>格変化 (Case System) - 物理役割接尾辞</h3>
            <table>
                <tr>
                    <th>格名称</th>
                    <th>接尾辞</th>
                    <th>役割</th>
                    <th>物理メタファー</th>
                </tr>
                <tr>
                    <td>慣性格 (Nominative)</td>
                    <td><strong>-а</strong> (-a)</td>
                    <td>主語</td>
                    <td>Inertia (慣性) - そのまま存在する質量</td>
                </tr>
                <tr>
                    <td>作用格 (Accusative)</td>
                    <td><strong>-он</strong> (-on)</td>
                    <td>目的語</td>
                    <td>Operation (作用) - 力を受ける対象</td>
                </tr>
                <tr>
                    <td>定数格 (Genitive)</td>
                    <td><strong>-иск</strong> (-isk)</td>
                    <td>所有/属性</td>
                    <td>Constant (定数) - 不変の性質</td>
                </tr>
                 <tr>
                    <td>ベクトル格 (Dative)</td>
                    <td><strong>-цу</strong> (-tsu)</td>
                    <td>～へ/方向</td>
                    <td>Vector (ベクトル) - 運動の向き</td>
                </tr>
            </table>

            <h3>時制 (Tense) - 観測相</h3>
            <p>時間は存在しない。あるのは「観測されたか否か」である。</p>
            <ul>
                <li><strong>確定相 (Defined):</strong> <code>-т (-t)</code> - 過去/現在完了。観測済み。</li>
                <li><strong>未確定相 (Undefined):</strong> <code>-м (-m)</code> - 未来/推量。波動関数的ゆらぎ。</li>
                <li><strong>理論相 (Theoretical):</strong> <code>-ы (-y)</code> - 仮定/反実仮想。虚数領域。</li>
            </ul>
        </section>

        <section id="translator" class="section" style="border: 1px solid var(--accent);">
            <h2>双方向翻訳ターミナル</h2>
            <textarea id="jp-input" placeholder="例：私は 先生が 好きだ" oninput="autoTranslate()"></textarea>
            <div class="trans-display" id="m-output">// STANDBY</div>
            <div id="log" style="font-size: 0.75rem; color: var(--secondary); margin-top: 10px; font-family: monospace;"></div>
        </section>

        <section id="dictionary" class="section">
            <h2>辞書データベース & データ排除 & 一括登録</h2>
            <div class="tool-grid">
                <div style="max-height: 400px; overflow-y: auto; border: 1px solid var(--border);">
                    <table>
                        <thead><tr><th>種類</th><th>語根</th><th>意味</th><th>操作</th></tr></thead>
                        <tbody id="dict-body"></tbody>
                    </table>
                </div>
                <h3 style="margin-top:20px;">個別登録</h3>
                    <select id="new-type">
                        <option value="verb">動詞 (関数)</option>
                        <option value="noun">名詞 (変数)</option>
                        <option value="adj">形容詞 (属性)</option>
                        <option value="adv">副詞 (様態)</option>
                        p<option value="conj">接続詞 (論理)</option>
                    </select>
                    <input type="text" id="new-root" placeholder="語根 (Cyrillic)" style="margin-top:5px;">
                    <input type="text" id="new-mean" placeholder="意味 (日本語)" style="margin-top:5px;">
                    <button onclick="addWord()">個別追加</button>
                </div>
                <div>
                    <h3>一括インポート</h3>
                    <div class="import-area">
                        <label style="font-size: 0.75rem; color: var(--secondary);">貼り付け例：種類：名詞 語根：Брот | 意味：パン</label>
                        <textarea id="bulk-input" style="height: 120px; margin-top: 5px;" placeholder="ここにコピー＆ペースト..."></textarea>
                        <button onclick="bulkImport()" style="background: var(--success); color: white;">一括インポート実行</button>
                        <button onclick="clearStorage()" style="background:none; color:var(--danger); border:1px solid var(--danger); font-size:0.7rem; margin-top:20px;">[ 全データを初期化 ]</button>
                    </div>

                    <button onclick="addWord()">データベースを更新</button>
                </div>
        </section>
        
        <script>
            // 起動時にストレージを確認
            let dictionary = JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultDict;
            
            function save() {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(dictionary));
                document.getElementById('save-status').innerText = "● Storage Saved: " + new Date().toLocaleTimeString();
            }
            // --- 記憶プロトコル (Storage Engine) ---
            const STORAGE_KEY = 'm_cyrillic_v3_final';
            
            const defaultDict = {
                verbs: [{id:1, root:"Скан", mean:"解析"}, {id:2, root:"Либ", mean:"好き"}],
                nouns: [{id:3, root:"Наблю", mean:"先生"}, {id:4, root:"Сист", mean:"システム"}],
                adjs: [{id:5, root:"Ю", mean:"美しい"}],
                advs: [{id:6, root:"全", mean:"完全に"}],
                conjs: [{id:7, root:"Иф", mean:"もし"}]
            };
            
            function refreshUI() {
                const tbody = document.getElementById('dict-body');
                tbody.innerHTML = '';
                const types = { verb:'動', noun:'名', adj:'形', adv:'副', conj:'接' };
                const colors = { verb:'#d2a8ff', noun:'#7ee787', adj:'#ff7b72', adv:'#d29922', conj:'#a5d6ff' };
            
                Object.keys(types).forEach(key => {
                    const list = dictionary[key+'s'] || [];
                    list.forEach(item => {
                        tbody.innerHTML += `<tr>
                        <td><span class="badge" style="color:${colors[key]}">${types[key]}</span></td>
                        <td style="font-family:monospace;"><b>${item.root}</b></td><td>${item.mean}</td>
                        <td><button onclick="deleteWord('${key}', ${item.id})" style="padding:2px 5px; font-size:0.6rem; background:none; color:var(--danger); border:1px solid var(--danger); cursor:pointer;">削除</button></td>
                        </tr>`;
                    });
                });
                save(); // UI更新のたびに保存
            }
            
            // ★ 一括登録ロジック
            function bulkImport() {
                const text = document.getElementById('bulk-input').value;
                const lines = text.split('\n');
                lines.forEach(line => {
                    const r = line.match(/語根[:：]\s*([^\s\|]+)/);
                    const m = line.match(/意味[:：]\s*([^\s\n]+)/);
                    const t = line.match(/種類[:：]\s*(動詞|名詞|形容詞|副詞|接続詞)/);
                    
                    if(r && m && t) {
                        const typeMap = { '動詞':'verb', '名詞':'noun', '形容詞':'adj', '副詞':'adv', '接続詞':'conj' };
                        const key = typeMap[t[1]];
                        
                        if(!dictionary[key+'s']) dictionary[key+'s'] = [];
                        dictionary[key+'s'].push({id: Date.now() + Math.random(), root: r[1], mean: m[1]});
                    }
                });
                
                if (count > 0) {
                    alert(`${count}件の単語をデータベースに同期しました。`);
                    document.getElementById('bulk-input').value = '';
                    refreshUI();
                    autoTranslate();
                } else {
                    alert('有効なフォーマットが見つかりませんでした。');
                }
                document.getElementById('bulk-input').value = '';
                refreshUI(); autoTranslate();
            }
            // 保存用：ブラウザのストレージに現在の辞書を書き込む
            function saveToStorage() {
                localStorage.setItem('m_cyrillic_dict', JSON.stringify(dictionary));
            }
            // 読込用：ページを開いた時に保存された辞書を呼び出す
            function loadFromStorage() {
                const saved = localStorage.getItem('m_cyrillic_dict');
                if (saved) {
                    dictionary = JSON.parse(saved);
                    refreshUI();
                }
            }
            // --- 実行プロトコル ---
            function addWord() {
                const type = document.getElementById('new-type').value;
                const root = document.getElementById('new-root').value.trim();
                const mean = document.getElementById('new-mean').value.trim();
                if(root && mean) {
                    if(!dictionary[type+'s']) dictionary[type+'s'] = [];
                    dictionary[type+'s'].push({id: Date.now(), root: root, mean: mean});
                    document.getElementById('new-root').value = '';
                    document.getElementById('new-mean').value = '';
                    refreshUI(); autoTranslate();
                }
            }
            function deleteWord(type, id) {
                dictionary[type+'s'] = dictionary[type+'s'].filter(x => x.id !== id);
                refreshUI(); autoTranslate();
            }
            function clearStorage() {
                if(confirm("全ての単語データを消去して初期化しますか？")) {
                    localStorage.removeItem(STORAGE_KEY);
                    location.reload();
                }
            }
            function autoTranslate() {
                const input = document.getElementById('jp-input').value;
                if(!input) { document.getElementById('m-output').innerText = "// STANDBY"; return; }
                
                let v="", s="", o="", adj="", adv="", conj="", t="т", prefix="";
                
                if(input.includes("？")) prefix = "Ли-";
                // 各カテゴリをスキャン
                (dictionary.nouns || []).forEach(n => {
                    if(input.includes(n.mean+"が") || input.includes(n.mean+"は")) s = n.root + "а";
                    if(input.includes(n.mean+"を") || input.includes(n.mean+"に")) o = n.root + "он";
                });
                (dictionary.verbs || []).forEach(ver => { if(input.includes(ver.mean)) v = ver.root; });
                (dictionary.adjs || []).forEach(a => { if(input.includes(a.mean)) adj = a.root + "и "; });
                (dictionary.advs || []).forEach(a => { if(input.includes(a.mean)) adv = a.root + "о "; });
                (dictionary.conjs || []).forEach(c => { if(input.includes(c.mean)) conj = c.root + " "; });
                
                if(input.includes("もし") || input.includes("なら")) {
                    t = "ы"; if(!conj) conj = "Иф ";
                } else if(input.includes("だろう")) {
                    t = "м";
                }
                refreshUI();
</script>
    
</body>

</html>






